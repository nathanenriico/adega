<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adega do Tio Pancho - Bebidas Premium e Combos Especiais</title>
    <meta name="description" content="Adega do Tio Pancho - As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp. Seu rol√™ come√ßa aqui!">
    <meta name="keywords" content="adega, bebidas, vinho, cerveja, whisky, combos, delivery, whatsapp">
    <meta name="author" content="Adega do Tio Pancho">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Adega do Tio Pancho - Bebidas Premium">
    <meta property="og:description" content="As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=1200&h=630">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Adega do Tio Pancho - Bebidas Premium">
    <meta property="twitter:description" content="As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp.">
    <meta property="twitter:image" content="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=1200&h=630">
    
    <!-- PWA -->
    <meta name="theme-color" content="#d4af37">
    <link rel="apple-touch-icon" href="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=180&h=180">
    
    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://images.unsplash.com">
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/pix-payment.css">
    <link rel="stylesheet" href="css/mobile-app.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/fix-navigation.js"></script>
</head>
<body>
    <div class="container">


        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1><img src="/imagens/logo/adega-logo.jpg" alt="Adega do Tio Pancho" style="height: 40px; vertical-align: middle; margin-right: 8px;"> Adega do Tio Pancho</h1>
            </div>
            <p class="slogan">Seu rol√™ come√ßa aqui üçª</p>
        </header>

        <!-- Menu Horizontal Fixo -->
        <nav class="top-nav">
            <div class="nav-container">
                <button class="menu-toggle-top" onclick="toggleMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- Perfil do Cliente -->
                <div id="customer-profile" class="customer-profile" style="display: none;">
                    <div class="profile-icon">üë§</div>
                    <span id="profile-name"></span>
                </div>
                
                <!-- Endere√ßo Mobile -->
                <div class="mobile-address" onclick="changeAddress()"></div>
                
                <div class="nav-items">
                    <div class="nav-item" onclick="goToHome()">
                        <div class="nav-icon">üè†</div>
                        <span>In√≠cio</span>
                    </div>
                    <div class="nav-item" onclick="showSection('products')">
                        <div class="nav-icon">üç∑</div>
                        <span>Bebidas</span>
                    </div>
                    <div class="nav-item" onclick="filterProducts('promocoes'); showSection('products')">
                        <div class="nav-icon">üî•</div>
                        <span>Promo√ß√µes</span>
                    </div>
                    <div class="nav-item" onclick="showSection('contact')">
                        <div class="nav-icon">üìû</div>
                        <span>Contato</span>
                    </div>
                    <div class="nav-item" onclick="showSection('about')">
                        <div class="nav-icon">‚ÑπÔ∏è</div>
                        <span>Sobre</span>
                    </div>
                </div>
                
                <div class="nav-right">
                    <div class="cart-widget" onclick="toggleCart()">
                        <div class="cart-icon">üõçÔ∏è</div>
                        <div class="cart-info">
                            <span class="cart-count" id="cart-count-widget">0</span>
                            <span class="cart-total" id="cart-total-widget">R$ 0,00</span>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <nav class="main-nav">
            <ul class="nav-menu">
                <li><a href="javascript:void(0)" onclick="showSection('home')">In√≠cio</a></li>
                <li><a href="javascript:void(0)" onclick="showSection('products')">Produtos</a></li>
                <li><a href="javascript:void(0)" onclick="showSection('about')">Sobre</a></li>
                <li><a href="javascript:void(0)" onclick="showSection('contact')">Contato</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div id="home" class="section active">
                <!-- Se√ß√£o de Informa√ß√µes do Cliente -->
                <div id="customer-info" class="customer-info-section">
                    <div class="info-card">
                        <h2>üìã Suas Informa√ß√µes</h2>
                        <p>Para melhor atendimento, informe seus dados abaixo:</p>
                        
                        <div class="info-form">
                            <input type="text" id="customer-name" placeholder="Seu nome completo" required>
                            <input type="tel" id="customer-phone" placeholder="Seu WhatsApp (com DDD)" required>
                            <button onclick="saveCustomerInfo()" class="save-info-btn">Salvar Informa√ß√µes</button>
                        </div>
                    </div>
                </div>
                
                <!-- Painel do Cliente -->
                <div id="customer-panel" class="customer-panel" style="display: none;">
                    <div class="panel-header">
                        <h2>Ol√°, <span id="customer-name-display"></span>! üëã</h2>
                        <button onclick="logoutCustomer()" class="logout-btn">Sair</button>
                    </div>
                    
                    <div class="customer-stats">
                        <div class="stat-card">
                            <h3>Pontos Acumulados</h3>
                            <span id="customer-points">0</span>
                        </div>
                        <div class="stat-card">
                            <h3>Pedidos Realizados</h3>
                            <span id="customer-orders">0</span>
                        </div>
                        <div class="stat-card">
                            <h3>Cupons Dispon√≠veis</h3>
                            <span id="customer-coupons">0</span>
                        </div>
                    </div>
                    
                    <div class="customer-actions">
                        <button onclick="makeNewOrder()" class="new-order-btn">üì¶ Fazer Novo Pedido</button>
                        <button onclick="showOrderHistory()" class="history-btn">üìã Hist√≥rico de Compras</button>
                        <button onclick="showCoupons()" class="coupons-btn">üéÅ Meus Cupons</button>
                        <button onclick="simulateOrder()" class="history-btn">üß™ Simular Pedido (Teste)</button>
                    </div>
                    
                    <div id="order-history" class="order-history" style="display: none;">
                        <h3>Hist√≥rico de Compras</h3>
                        <div id="history-list"></div>
                    </div>
                    
                    <div id="coupons-list" class="coupons-list" style="display: none;">
                        <h3>Cupons Dispon√≠veis</h3>
                        <div id="available-coupons"></div>
                    </div>
                </div>
                
                <div class="home-section">
                    <div class="welcome-card">
                        <h2>üìç Endere√ßo</h2>
                        <div class="address-content">
                            <img src="../imagens/adega.webp" alt="Fachada da Adega" class="address-image">
                            <div class="address-text">
                                <p><strong>ADEGA DO TIO PANCHO</strong><br>
R. Oswaldo Barreto, 708 E - Alvin√≥polis<br>
Atibaia - SP, 12942-570</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="delivery-address-card">
                        <h2>üìç Endere√ßo de Entrega</h2>
                        <div class="delivery-address-form" id="delivery-address-form">
                            <div class="address-field">
                                <label for="address-cep">CEP <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-cep" placeholder="Digite o CEP" maxlength="9">
                                <small>C√≥digo postal para localizar o endere√ßo</small>
                            </div>
                            <div class="address-field">
                                <label for="address-street">Rua (Logradouro) <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-street" placeholder="Nome da rua ou avenida">
                            </div>
                            <div class="address-field">
                                <label for="address-number">N√∫mero <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-number" placeholder="N√∫mero da resid√™ncia">
                            </div>
                            <div class="address-field">
                                <label for="address-complement">Complemento <span class="optional">‚ùå Opcional</span></label>
                                <input type="text" id="address-complement" placeholder="Apartamento, bloco, casa dos fundos, etc.">
                                <small>Informa√ß√µes adicionais para facilitar a entrega</small>
                            </div>
                            <div class="address-field">
                                <label for="address-neighborhood">Bairro <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-neighborhood" placeholder="Bairro onde o endere√ßo est√° localizado">
                            </div>
                            <div class="address-field">
                                <label for="address-city">Cidade <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-city" placeholder="Cidade do destinat√°rio" value="Atibaia">
                            </div>
                            <button class="save-address-btn" onclick="saveDeliveryAddress()">Salvar Endere√ßo</button>
                        </div>
                        <div id="saved-address" class="saved-address" style="display: none;">
                            <p id="address-display"></p>
                            <button class="edit-address-btn" onclick="editDeliveryAddress()">Editar</button>
                        </div>
                    </div>
                    
                    <div class="contact-card">
                        <h2>üìû Contato</h2>
                        <p><strong>(11) 93394-9002</strong></p>
                        <button class="whatsapp-btn" onclick="openWhatsApp()">
                            Chamar no WhatsApp üçæ
                        </button>
                    </div>
                    
                    <div class="hours-card">
                        <h2>üïí Hor√°rio de Funcionamento</h2>
                        <div class="hours-grid">
                            <div class="day"><span>Domingo</span><span>09:00‚Äì18:00</span></div>
                            <div class="day"><span>Segunda-feira</span><span>09:00‚Äì17:00</span></div>
                            <div class="day"><span>Ter√ßa-feira</span><span>10:00‚Äì20:00</span></div>
                            <div class="day"><span>Quarta-feira</span><span>10:00‚Äì20:00</span></div>
                            <div class="day"><span>Quinta-feira</span><span>10:00‚Äì20:00</span></div>
                            <div class="day"><span>Sexta-feira</span><span>10:00‚Äì22:00</span></div>
                            <div class="day"><span>S√°bado</span><span>10:00‚Äì22:00</span></div>
                        </div>
                        <div class="delivery-hours">
                            <h3>üöö Entrega: 10:00‚Äì20:00</h3>
                        </div>
                    </div>
                    
                    <div class="reviews-card">
                        <h2>‚≠ê Avalia√ß√µes</h2>
                        <div class="reviews-list">
                            <div class="review">
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <p>"Lugar muito bem organizado com muitas op√ß√µes de produtos e atendimento nota 10."</p>
                                <span class="reviewer">- Francisco Ramos</span>
                            </div>
                            <div class="review">
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <p>"Um excelente atendimento...a entrega sempre no prazo ou at√© antes."</p>
                                <span class="reviewer">- Priscilla Sammartano</span>
                            </div>
                            <div class="review">
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <p>"Excelente atendimento e qualidade de produtos, bons pre√ßos."</p>
                                <span class="reviewer">- Claudia Alves</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="products" class="section">
                <div class="products-section">
                    <h3>Nossos Produtos</h3>
                    
                    <!-- Filtros Desktop -->
                    <div class="filters">
                        <button class="filter-btn active" onclick="filterProducts('all')">Todos</button>
                        <button class="filter-btn" onclick="filterProducts('cervejas')">Cervejas</button>
                        <button class="filter-btn" onclick="filterProducts('drinks')">Drinks</button>
                        <button class="filter-btn" onclick="filterProducts('vinhos')">Vinhos</button>
                        <button class="filter-btn" onclick="filterProducts('refrigerantes')">Refrigerantes</button>
                        <button class="filter-btn" onclick="filterProducts('aguas')">√Åguas</button>
                        <button class="filter-btn" onclick="filterProducts('chopp')">Chopp</button>
                    </div>
                    

                    



                    
                    <div class="mobile-food-grid" id="products-grid">
                        <!-- Produtos ser√£o carregados aqui -->
                    </div>
                </div>
            </div>
            
            <!-- Modal de Categoria Mobile -->
            <div id="mobile-category-modal" class="mobile-category-modal">
                <div class="mobile-category-header">
                    <button class="mobile-back-btn" onclick="closeMobileCategoryModal()">‚Üê</button>
                    <h3 id="mobile-category-title">Categoria</h3>
                </div>
                <div class="mobile-category-content" id="mobile-category-content">
                    <!-- Produtos da categoria -->
                </div>
            </div>

            <div id="about" class="section">
                <div class="about-section">
                    <h3>Sobre a Adega</h3>
                    <p>A Adega do Tio Pancho √© especializada em bebidas premium, oferecendo os melhores vinhos, cervejas artesanais e destilados.</p>
                    <div class="features">
                        <div class="feature">
                            <h4>üç∑ Produtos Premium</h4>
                            <p>Sele√ß√£o cuidadosa de bebidas de alta qualidade</p>
                        </div>
                        <div class="feature">
                            <h4>üöö Entrega R√°pida</h4>
                            <p>Atendimento √°gil via WhatsApp</p>
                        </div>
                        <div class="feature">
                            <h4>üí∞ Melhores Pre√ßos</h4>
                            <p>Ofertas especiais e promo√ß√µes exclusivas</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="contact" class="section">
                <div class="contact-section">
                    <div class="contact-card">
                        <h2>üì± WhatsApp</h2>
                        <p><strong>(11) 93394-9002</strong></p>
                        <p>Atendimento direto pelo WhatsApp</p>
                        <button class="whatsapp-btn" onclick="openWhatsApp()">
                            Chamar no WhatsApp üí¨
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <div class="admin-access">
            <button onclick="window.location.href='admin.html'">Admin</button>
        </div>
    </div>







    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Adega do Tio Pancho",
      "description": "As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp.",
      "url": "https://adegadotiopunch.com",
      "telephone": "+55-99-99999-9999",
      "priceRange": "$$",
      "servesCuisine": "Bebidas",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "BR"
      },
      "openingHours": "Mo-Su 18:00-02:00",
      "sameAs": [
        "https://wa.me/5599999999999"
      ]
    }
    </script>
    
    <!-- Menu Lateral -->
    <div id="side-menu" class="side-menu">
        <div class="menu-header">
            <h3>Menu</h3>
            <button class="menu-close" onclick="toggleMenu()">&times;</button>
        </div>
        <div class="menu-content">
            <div class="menu-item" onclick="toggleCart()">
                <div class="menu-icon">üõí</div>
                <div class="menu-text">
                    <span>Carrinho</span>
                    <span class="cart-badge" id="cart-count">0</span>
                </div>
            </div>
            <div class="menu-item" onclick="openWhatsApp()">
                <div class="menu-icon">üí¨</div>
                <div class="menu-text">WhatsApp</div>
            </div>
            <div class="menu-item" onclick="toggleWhatsAppBot()">
                <div class="menu-icon">üì±</div>
                <div class="menu-text">WhatsApp Bot</div>
            </div>
            <div class="menu-item" onclick="toggleChatBot()">
                <div class="menu-icon">ü§ñ</div>
                <div class="menu-text">Chat Bot IA</div>
            </div>
        </div>
    </div>
    <div id="menu-overlay" class="menu-overlay" onclick="toggleMenu()"></div>
    
    <!-- Carrinho Lateral -->
    <div id="cart-sidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3>Meu Carrinho</h3>
            <button class="cart-close" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-content">
            <div id="cart-items"></div>
        </div>
        <div class="cart-footer" style="display: none;">
            <!-- Footer removido - total e bot√£o agora ficam dentro dos itens -->
        </div>
    </div>
    <div id="cart-overlay" class="cart-overlay" onclick="toggleCart()"></div>

    <!-- WhatsApp Bot Simulator -->
    <div id="whatsapp-bot-container" class="whatsapp-bot-container">
        <div class="whatsapp-bot-header">
            <span>üì± WhatsApp Bot - Adega do Tio Pancho</span>
            <button onclick="toggleWhatsAppBot()">&times;</button>
        </div>
        <div class="whatsapp-bot-messages" id="whatsapp-bot-messages">
            <div class="bot-message whatsapp-style">
                üç∑ Ol√°! Bem-vindo √† Adega do Tio Pancho!
                <br><br>
                Sou seu assistente virtual especializado em pedidos. Como posso ajudar?
                <br><br>
                <strong>Menu Principal:</strong><br>
                1Ô∏è‚É£ Ver produtos dispon√≠veis<br>
                2Ô∏è‚É£ Fazer pedido<br>
                3Ô∏è‚É£ Acompanhar pedido existente<br>
                4Ô∏è‚É£ Falar com atendente humano
                <br><br>
                Digite o n√∫mero da op√ß√£o desejada.
            </div>
        </div>
        <div class="whatsapp-bot-input">
            <input type="text" id="whatsapp-bot-input" placeholder="Digite sua mensagem..." onkeypress="handleWhatsAppBotInput(event)">
            <button onclick="sendWhatsAppBotMessage()" id="whatsapp-send-btn">‚û§</button>
        </div>
        <div class="whatsapp-bot-footer">
            <small>Simulador WhatsApp Bot - Teste o atendimento</small>
        </div>
    </div>
    
    <!-- Chat Bot Original -->
    <div id="chatbot-container" class="chatbot-container">
        <div class="chatbot-header">
            <span>ü§ñ Assistente IA</span>
            <button onclick="toggleChatBot()">&times;</button>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="bot-message">
                Ol√°! Sou o assistente inteligente da Adega do Tio Pancho. Posso ajudar com produtos, pre√ßos, entregas e muito mais!
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbot-input" placeholder="Digite sua mensagem..." onkeypress="handleChatInput(event)">
            <button onclick="sendChatMessage()" id="send-btn">‚û§</button>
        </div>
        <div class="chatbot-footer">
            <small>Powered by OpenAI GPT</small>
        </div>
    </div>

    <script src="js/whatsapp-bot.js"></script>
    <script src="js/loyalty.js"></script>
    <script src="js/mobile-app.js"></script>
    <script src="js/script.js"></script>
    <!-- Menu Inferior Mobile -->
    <nav class="mobile-bottom-nav">
        <div class="mobile-nav-item" onclick="showSection('home')">
            <div class="mobile-nav-icon">üè†</div>
            <span>In√≠cio</span>
        </div>
        <div class="mobile-nav-item" onclick="showSection('products')">
            <div class="mobile-nav-icon">üç∑</div>
            <span>Produtos</span>
        </div>
        <div class="mobile-nav-item" onclick="showSection('products'); filterProducts('cervejas')">
            <div class="mobile-nav-icon">üç∫</div>
            <span>Cervejas</span>
        </div>
        <div class="mobile-nav-item" onclick="showSection('contact')">
            <div class="mobile-nav-icon">üìû</div>
            <span>Contato</span>
        </div>
        <div class="mobile-nav-item" onclick="showSection('about')">
            <div class="mobile-nav-icon">‚ÑπÔ∏è</div>
            <span>Sobre</span>
        </div>
    </nav>

    <script>
    function changeAddress() {
        if (window.innerWidth > 768) return;
        showSection('home');
    }
    
    // Limpar produtos antigos do localStorage para carregar os novos
    if (localStorage.getItem('adegaProducts')) {
        const savedProducts = JSON.parse(localStorage.getItem('adegaProducts'));
        if (savedProducts.length < 19) {
            localStorage.removeItem('adegaProducts');
            console.log('Produtos antigos removidos, carregando novos produtos...');
        }
    }
    
    // For√ßar nome correto
    const savedConfig = localStorage.getItem('adegaConfig');
    if (savedConfig) {
        const configData = JSON.parse(savedConfig);
        if (configData.adegaName.includes('Punch')) {
            configData.adegaName = 'Adega do Tio Pancho';
            localStorage.setItem('adegaConfig', JSON.stringify(configData));
            location.reload();
        }
    }
    
    // Fun√ß√µes do modal de categoria mobile
    function openMobileCategoryModal(category) {
        if (window.innerWidth > 768) {
            filterProducts(category);
            return;
        }
        
        const modal = document.getElementById('mobile-category-modal');
        const title = document.getElementById('mobile-category-title');
        const content = document.getElementById('mobile-category-content');
        
        const categoryNames = {
            'all': 'Todos os Produtos',
            'cervejas': 'Cervejas',
            'drinks': 'Drinks',
            'vinhos': 'Vinhos',
            'refrigerantes': 'Refrigerantes',
            'aguas': '√Åguas e Gelo',
            'chopp': 'Chopp'
        };
        
        title.textContent = categoryNames[category] || 'Produtos';
        
        const categoryProducts = category === 'all' 
            ? products 
            : products.filter(p => p.category === category);
        
        content.innerHTML = categoryProducts.map(product => `
            <div class="mobile-category-product">
                <img src="${product.image}" alt="${product.name}" onerror="this.src='https://via.placeholder.com/150x100/333/fff?text=Produto'">
                <h4>${product.name}</h4>
                <div class="price">R$ ${product.price.toFixed(2)}</div>
                <button class="add-btn" onclick="addToCart(${product.id}); closeMobileCategoryModal();">Adicionar</button>
            </div>
        `).join('');
        
        modal.classList.add('active');
    }
    
    function closeMobileCategoryModal() {
        const modal = document.getElementById('mobile-category-modal');
        modal.classList.remove('active');
    }
    
    function openCategoryPage(category) {
        filterProducts(category);
    }
    
    function toggleFavorite(productId) {
        const favoriteBtn = event.target.closest('.product-favorite');
        const heart = favoriteBtn.querySelector('.heart');
        
        favoriteBtn.classList.toggle('active');
        
        if (favoriteBtn.classList.contains('active')) {
            heart.textContent = '‚ô•';
        } else {
            heart.textContent = '‚ô°';
        }
    }
    
    function searchProducts() {
        const searchTerm = document.getElementById('mobile-product-search').value.toLowerCase();
        const filteredProducts = products.filter(product => 
            product.name.toLowerCase().includes(searchTerm)
        );
        renderProducts(filteredProducts);
    }
    </script>
</body>
</html>