<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adega do Tio Pancho - Bebidas Premium e Combos Especiais</title>
    <meta name="description" content="Adega do Tio Pancho - As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp. Seu rol√™ come√ßa aqui!">
    <meta name="keywords" content="adega, bebidas, vinho, cerveja, whisky, combos, delivery, whatsapp">
    <meta name="author" content="Adega do Tio Pancho">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Adega do Tio Pancho - Bebidas Premium">
    <meta property="og:description" content="As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=1200&h=630">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Adega do Tio Pancho - Bebidas Premium">
    <meta property="twitter:description" content="As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp.">
    <meta property="twitter:image" content="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=1200&h=630">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d4af37">
    <link rel="apple-touch-icon" href="https://images.unsplash.com/photo-1506377247377-2a5b3b417ebb?w=180&h=180">
    
    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://images.unsplash.com">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="pix-payment.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
</head>
<body>
    <div class="container">


        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>üç∑ Adega do Tio Pancho</h1>
            </div>
            <p class="slogan">Seu rol√™ come√ßa aqui üçª</p>
        </header>

        <!-- Menu Horizontal Fixo -->
        <nav class="top-nav">
            <div class="nav-container">
                <button class="menu-toggle-top" onclick="toggleMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <div class="nav-items">
                    <div class="nav-item" onclick="goToHome()">
                        <div class="nav-icon">üè†</div>
                        <span>In√≠cio</span>
                    </div>
                    <div class="nav-item" onclick="showSection('products')">
                        <div class="nav-icon">üç∑</div>
                        <span>Bebidas</span>
                    </div>
                    <div class="nav-item" onclick="filterProducts('promocoes'); showSection('products')">
                        <div class="nav-icon">üî•</div>
                        <span>Promo√ß√µes</span>
                    </div>
                    <div class="nav-item" onclick="showSection('contact')">
                        <div class="nav-icon">üìû</div>
                        <span>Contato</span>
                    </div>
                    <div class="nav-item" onclick="showSection('about')">
                        <div class="nav-icon">‚ÑπÔ∏è</div>
                        <span>Sobre</span>
                    </div>
                </div>
                
                <div class="cart-widget" onclick="toggleCart()">
                    <div class="cart-icon">üõçÔ∏è</div>
                    <div class="cart-info">
                        <span class="cart-count" id="cart-count-widget">0</span>
                        <span class="cart-total" id="cart-total-widget">R$ 0,00</span>
                    </div>
                </div>
            </div>
        </nav>

        <nav class="main-nav">
            <ul class="nav-menu">
                <li><a href="#home" onclick="showSection('home')">In√≠cio</a></li>
                <li><a href="#products" onclick="showSection('products')">Produtos</a></li>
                <li><a href="#about" onclick="showSection('about')">Sobre</a></li>
                <li><a href="#contact" onclick="showSection('contact')">Contato</a></li>
            </ul>
        </nav>

        <main class="main-content">
            <div id="home" class="section active">
                <div class="home-section">
                    <div class="welcome-card">
                        <h2>üìç Endere√ßo</h2>
                        <div class="address-content">
                            <img src="../imagens/adega.webp" alt="Fachada da Adega" class="address-image">
                            <div class="address-text">
                                <p><strong>ADEGA DO TIO PANCHO</strong><br>
R. Oswaldo Barreto, 708 E - Alvin√≥polis<br>
Atibaia - SP, 12942-570</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="delivery-address-card">
                        <h2>üìç Endere√ßo de Entrega</h2>
                        <div class="delivery-address-form" id="delivery-address-form">
                            <div class="address-field">
                                <label for="address-cep">CEP <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-cep" placeholder="Digite o CEP" maxlength="9">
                                <small>C√≥digo postal para localizar o endere√ßo</small>
                            </div>
                            <div class="address-field">
                                <label for="address-street">Rua (Logradouro) <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-street" placeholder="Nome da rua ou avenida">
                            </div>
                            <div class="address-field">
                                <label for="address-number">N√∫mero <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-number" placeholder="N√∫mero da resid√™ncia">
                            </div>
                            <div class="address-field">
                                <label for="address-complement">Complemento <span class="optional">‚ùå Opcional</span></label>
                                <input type="text" id="address-complement" placeholder="Apartamento, bloco, casa dos fundos, etc.">
                                <small>Informa√ß√µes adicionais para facilitar a entrega</small>
                            </div>
                            <div class="address-field">
                                <label for="address-neighborhood">Bairro <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-neighborhood" placeholder="Bairro onde o endere√ßo est√° localizado">
                            </div>
                            <div class="address-field">
                                <label for="address-city">Cidade <span class="required">‚úÖ Sim</span></label>
                                <input type="text" id="address-city" placeholder="Cidade do destinat√°rio" value="Atibaia">
                            </div>
                            <button class="save-address-btn" onclick="saveDeliveryAddress()">Salvar Endere√ßo</button>
                        </div>
                        <div id="saved-address" class="saved-address" style="display: none;">
                            <p id="address-display"></p>
                            <button class="edit-address-btn" onclick="editDeliveryAddress()">Editar</button>
                        </div>
                    </div>
                    
                    <div class="contact-card">
                        <h2>üìû Contato</h2>
                        <p><strong>(11) 93394-9002</strong></p>
                        <button class="whatsapp-btn" onclick="openWhatsApp()">
                            Chamar no WhatsApp üçæ
                        </button>
                    </div>
                    
                    <div class="hours-card">
                        <h2>üïí Hor√°rio de Funcionamento</h2>
                        <div class="hours-grid">
                            <div class="day"><span>Domingo</span><span>09:00‚Äì18:00</span></div>
                            <div class="day"><span>Segunda-feira</span><span>09:00‚Äì17:00</span></div>
                            <div class="day"><span>Ter√ßa-feira</span><span>10:00‚Äì20:00</span></div>
                            <div class="day"><span>Quarta-feira</span><span>10:00‚Äì20:00</span></div>
                            <div class="day"><span>Quinta-feira</span><span>10:00‚Äì20:00</span></div>
                            <div class="day"><span>Sexta-feira</span><span>10:00‚Äì22:00</span></div>
                            <div class="day"><span>S√°bado</span><span>10:00‚Äì22:00</span></div>
                        </div>
                        <div class="delivery-hours">
                            <h3>üöö Entrega: 10:00‚Äì20:00</h3>
                        </div>
                    </div>
                    
                    <div class="reviews-card">
                        <h2>‚≠ê Avalia√ß√µes</h2>
                        <div class="reviews-list">
                            <div class="review">
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <p>"Lugar muito bem organizado com muitas op√ß√µes de produtos e atendimento nota 10."</p>
                                <span class="reviewer">- Francisco Ramos</span>
                            </div>
                            <div class="review">
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <p>"Um excelente atendimento...a entrega sempre no prazo ou at√© antes."</p>
                                <span class="reviewer">- Priscilla Sammartano</span>
                            </div>
                            <div class="review">
                                <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                                <p>"Excelente atendimento e qualidade de produtos, bons pre√ßos."</p>
                                <span class="reviewer">- Claudia Alves</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="products" class="section">
                <div class="products-section">
                    <h3>Nossos Produtos</h3>
                    <div class="filters">
                        <button class="filter-btn active" onclick="filterProducts('all')">Todos</button>
                        <button class="filter-btn" onclick="filterProducts('bebidas')">Bebidas</button>
                        <button class="filter-btn" onclick="filterProducts('combos')">Combos</button>
                        <button class="filter-btn" onclick="filterProducts('promocoes')">Promo√ß√µes</button>
                    </div>

                    <div class="products-grid" id="products-grid">
                        <!-- Produtos ser√£o carregados aqui -->
                    </div>
                </div>
            </div>

            <div id="about" class="section">
                <div class="about-section">
                    <h3>Sobre a Adega</h3>
                    <p>A Adega do Tio Pancho √© especializada em bebidas premium, oferecendo os melhores vinhos, cervejas artesanais e destilados.</p>
                    <div class="features">
                        <div class="feature">
                            <h4>üç∑ Produtos Premium</h4>
                            <p>Sele√ß√£o cuidadosa de bebidas de alta qualidade</p>
                        </div>
                        <div class="feature">
                            <h4>üöö Entrega R√°pida</h4>
                            <p>Atendimento √°gil via WhatsApp</p>
                        </div>
                        <div class="feature">
                            <h4>üí∞ Melhores Pre√ßos</h4>
                            <p>Ofertas especiais e promo√ß√µes exclusivas</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="contact" class="section">
                <div class="contact-section">
                    <div class="contact-card">
                        <h2>üì± WhatsApp</h2>
                        <p><strong>(11) 93394-9002</strong></p>
                        <p>Atendimento direto pelo WhatsApp</p>
                        <button class="whatsapp-btn" onclick="openWhatsApp()">
                            Chamar no WhatsApp üí¨
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <div class="admin-access">
            <button onclick="showAdminLogin()">Admin</button>
        </div>
    </div>

    <!-- Modal de Login Admin -->
    <div id="admin-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAdminModal()">&times;</span>
            <h3>Acesso Administrativo</h3>
            <input type="password" id="admin-password" placeholder="Digite a senha">
            <button onclick="adminLogin()">Entrar</button>
        </div>
    </div>

    <!-- Painel Admin -->
    <div id="admin-panel" class="admin-panel hidden">
        <div class="admin-header">
            <h3>Painel Administrativo</h3>
            <div class="admin-header-buttons">
                <button onclick="backToSite()" class="back-to-site-btn">üè† Voltar ao Site</button>
                <button onclick="logout()">Sair</button>
            </div>
        </div>
        
        <div class="admin-sections">
            <div class="admin-section">
                <h4>Gest√£o</h4>
                <div class="management-buttons">
                    <button onclick="openOrdersManagement()" class="management-btn">
                        üìã Gest√£o de Pedidos
                    </button>
                    <button onclick="openCartAnalytics()" class="management-btn analytics-btn">
                        üìà Analytics do Carrinho
                    </button>
                </div>
            </div>

            <div class="admin-section">
                <h4>Configura√ß√µes Gerais</h4>
                <input type="text" id="adega-name" placeholder="Nome da Adega">
                <input type="text" id="whatsapp-number" placeholder="N√∫mero WhatsApp (5599999999999)">
                <textarea id="default-message" placeholder="Mensagem padr√£o WhatsApp"></textarea>
                <input type="text" id="payment-link" placeholder="Link de pagamento (Mercado Pago)">
                <small>Link de pagamento para cobran√ßas via WhatsApp. Use {valor}, {pedido} e {descricao} como vari√°veis.</small>
                <button onclick="saveSettings()">Salvar Configura√ß√µes</button>
            </div>
            
            <div class="admin-section">
                <h4>Chatbot IA</h4>
                <input type="password" id="openai-api-key" placeholder="Chave da API OpenAI (opcional)">
                <small>Para ativar o chatbot inteligente, insira sua chave da API do OpenAI</small>
                <button onclick="saveAISettings()">Salvar Chave IA</button>
                <button onclick="testAI()">Testar IA</button>
            </div>
            
            <div class="admin-section">
                <h4>WhatsApp Autom√°tico</h4>
                <div style="background: rgba(37, 211, 102, 0.1); padding: 15px; border-radius: 10px; border: 1px solid rgba(37, 211, 102, 0.3);">
                    <h5 style="color: #25D366; margin-bottom: 10px;">‚úÖ Sistema Ativo</h5>
                    <p style="margin: 0; font-size: 0.9rem; color: rgba(255,255,255,0.8);">Notifica√ß√µes autom√°ticas configuradas:</p>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9rem; color: rgba(255,255,255,0.8);">
                        <li>Preparando ‚Üí "Seu pedido est√° sendo preparado"</li>
                        <li>Saindo ‚Üí "Seu pedido est√° a caminho"</li>
                        <li>Entregue ‚Üí "Pedido entregue com sucesso"</li>
                    </ul>
                    <small style="color: rgba(255,255,255,0.6);">As mensagens s√£o enviadas automaticamente via WhatsApp Web</small>
                </div>
            </div>

            <div class="admin-section">
                <h4>Analytics</h4>
                <div class="analytics-grid">
                    <div class="metric-card">
                        <h5>Cliques WhatsApp</h5>
                        <span id="whatsapp-clicks">0</span>
                    </div>
                    <div class="metric-card">
                        <h5>Produtos Mais Vistos</h5>
                        <div id="popular-products"></div>
                    </div>
                    <div class="metric-card">
                        <h5>Visitantes Hoje</h5>
                        <span id="daily-visitors">0</span>
                    </div>
                </div>
                <button onclick="resetAnalytics()">Resetar Dados</button>
            </div>

            <div class="admin-section">
                <h4>Gerenciar Produtos</h4>
                <div class="product-form">
                    <input type="text" id="product-name" placeholder="Nome do Produto">
                    <div class="image-upload-section">
                        <label for="product-image-file" class="image-upload-label">
                            üì∑ Selecionar Imagem do Produto
                        </label>
                        <input type="file" id="product-image-file" accept="image/*" multiple onchange="previewImage(this)">
                        <div id="image-preview" class="image-preview"></div>
                        <small style="color: rgba(255,255,255,0.7); display: block; margin-top: 5px;">
                            Ou use uma URL: <input type="text" id="product-image-url" placeholder="URL da imagem (opcional)" style="margin-left: 10px; width: 200px;">
                        </small>
                    </div>
                    <input type="number" id="product-price" placeholder="Pre√ßo" step="0.01">
                    <select id="product-category">
                        <option value="bebidas">Bebidas</option>
                        <option value="combos">Combos</option>
                        <option value="promocoes">Promo√ß√µes</option>
                    </select>
                    <button onclick="addProduct()">Adicionar Produto</button>
                </div>
                
                <div id="admin-products-list"></div>
            </div>
        </div>
    </div>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Adega do Tio Pancho",
      "description": "As melhores bebidas, vinhos premium e combos especiais. Atendimento via WhatsApp.",
      "url": "https://adegadotiopunch.com",
      "telephone": "+55-99-99999-9999",
      "priceRange": "$$",
      "servesCuisine": "Bebidas",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "BR"
      },
      "openingHours": "Mo-Su 18:00-02:00",
      "sameAs": [
        "https://wa.me/5599999999999"
      ]
    }
    </script>
    
    <!-- Menu Lateral -->
    <div id="side-menu" class="side-menu">
        <div class="menu-header">
            <h3>Menu</h3>
            <button class="menu-close" onclick="toggleMenu()">&times;</button>
        </div>
        <div class="menu-content">
            <div class="menu-item" onclick="toggleCart()">
                <div class="menu-icon">üõí</div>
                <div class="menu-text">
                    <span>Carrinho</span>
                    <span class="cart-badge" id="cart-count">0</span>
                </div>
            </div>
            <div class="menu-item" onclick="openWhatsApp()">
                <div class="menu-icon">üí¨</div>
                <div class="menu-text">WhatsApp</div>
            </div>
            <div class="menu-item" onclick="toggleChatBot()">
                <div class="menu-icon">ü§ñ</div>
                <div class="menu-text">Chat Bot 24h</div>
            </div>
        </div>
    </div>
    <div id="menu-overlay" class="menu-overlay" onclick="toggleMenu()"></div>
    
    <!-- Carrinho Lateral -->
    <div id="cart-sidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3>Meu Carrinho</h3>
            <button class="cart-close" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-content">
            <div id="cart-items"></div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total: </span>
                <span id="cart-total-modal">R$ 0,00</span>
            </div>
            <button class="checkout-btn" onclick="goToCheckout()">
                Finalizar Pedido
            </button>
        </div>
    </div>
    <div id="cart-overlay" class="cart-overlay" onclick="toggleCart()"></div>

    <!-- Chat Bot -->
    <div id="chatbot-container" class="chatbot-container">
        <div class="chatbot-header">
            <span>ü§ñ Assistente IA</span>
            <button onclick="toggleChatBot()">&times;</button>
        </div>
        <div class="chatbot-messages" id="chatbot-messages">
            <div class="bot-message">
                Ol√°! Sou o assistente inteligente da Adega do Tio Pancho. Posso ajudar com produtos, pre√ßos, entregas e muito mais!
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbot-input" placeholder="Digite sua mensagem..." onkeypress="handleChatInput(event)">
            <button onclick="sendChatMessage()" id="send-btn">‚û§</button>
        </div>
        <div class="chatbot-footer">
            <small>Powered by OpenAI GPT</small>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="pix-generator.js"></script>
    <script src="pix-estatico.js"></script>
    <script src="pix-quick.js"></script>
    <script src="script.js"></script>
</body>
</html>